<html>
	<head>
		<table border="1px" style="width:100%;height:100%;">
			<tr style="height:100&;">
				<td style="height:100%;">
					<textarea id="chat" style="width:100%;height:100%;resize:none;border:0px;overflow-y:hidden;" readonly></textarea>
				</td>
			</tr>
			<tr>
				<td>
					<table>
						<tr>
							<td>Handle:</td>
							<td><input type="text" id="handle" value=""/></td>
							<td style="width:100%;"><input type="text" style="width:100%;" id="send" value=""/></td>
							<td><input type="button" id="send_button" value="Send"/></td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<script>
			function xml(str,callback,data)
			{
			    var xmlhttp=new XMLHttpRequest();
				xmlhttp.onreadystatechange=function()
				{
					if(xmlhttp.readyState==4)
						if(xmlhttp.status==200)
							if(callback)
								callback(xmlhttp.responseText);
				};
				xmlhttp.open('POST',encodeURI('?'+str),true);
				xmlhttp.send(data);
			}
			var chat=document.getElementById("chat");
			var handle=document.getElementById("handle");			
			var send=document.getElementById("send");
			var send_button=document.getElementById("send_button");
			handle.value="guest"+Math.floor(Math.random()*91823091283);
			send.focus();
			send.addEventListener('keypress',function(e){if((e.which||e.keyCode)===13)send_button.click();});
			send_button.onclick=function(){xml('tx=true',null,handle.value+': '+send.value);send.value='';};
			setInterval(function(){xml('rx=true',function(data){chat.innerHTML=data;});chat.scrollTop=chat.scrollHeight;},200);
		</script>
	</head>
	<body>
	</body>
</html>
